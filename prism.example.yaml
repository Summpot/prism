admin_addr: ":8080"

# Public-facing proxy listeners (multi-port / multi-protocol).
listeners:
  - listen_addr: ":25565"
    protocol: "tcp"
    mode: "routing" # routing | forward
  # Example UDP game port forwarding (direct):
  - listen_addr: ":19132"
    protocol: "udp"
    upstream: "127.0.0.1:19132"

logging:
  level: "info"
  format: "json"
  output: "stderr"
  add_source: false
  admin_buffer:
    enabled: true
    size: 1000

proxy_protocol_v2: false
buffer_size: 32768
upstream_dial_timeout_ms: 5000

reload:
  enabled: true
  poll_interval_ms: 1000

max_header_bytes: 65536

tunnel:
  auth_token: ""
  # When true, prisms will automatically open server-side listeners for tunnel
  # services that specify remote_addr (frp-like behavior).
  auto_listen_services: true
  endpoints:
    - listen_addr: ":7000"
      transport: "tcp" # tcp | udp | quic
    - listen_addr: ":7001"
      transport: "quic"
      quic:
        # If transport=quic and cert/key are empty, prism will generate a self-signed
        # certificate at startup.
        cert_file: ""
        key_file: ""

  # Optional: tunnel client role (uncomment to enable).
  # client:
  #   server_addr: "127.0.0.1:7000"
  #   transport: "tcp" # tcp | udp | quic
  #   dial_timeout_ms: 5000
  #   quic:
  #     server_name: "localhost"
  #     insecure_skip_verify: true
  #
  # services:
  #   - name: "home-mc"
  #     proto: "tcp" # tcp | udp
  #     local_addr: "127.0.0.1:25565"
  #     route_only: true # optional. If true, only reachable via routes (tunnel:home-mc).
  #     remote_addr: ":25565" # optional (frp-like). If set, prisms opens this listener automatically.

routing_parsers:
  - type: "builtin"
    name: "minecraft_handshake"
  - type: "builtin"
    name: "tls_sni"

timeouts:
  handshake_timeout_ms: 3000
  idle_timeout_ms: 0

routes:
  play.example.com: "127.0.0.1:25566"
  "*.labs.example.com": "127.0.0.1:25567"
  home.example.com: "tunnel:home-mc"
