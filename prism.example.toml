server_enabled = true
listen_addr = ":25565"
admin_addr = ":8080"
proxy_protocol_v2 = false
buffer_size = 32768
upstream_dial_timeout_ms = 5000
max_header_bytes = 65536

[tunnel]
# Enable tunnel mode to allow tunnel clients to register services that can be
# used as upstreams via the syntax: tunnel:<service>
enabled = false
listen_addr = ":7000"
transport = "tcp" # tcp | udp | quic
auth_token = ""

[tunnel.quic]
# If transport=quic and cert/key are empty, prism will generate a self-signed
# certificate at startup.
cert_file = ""
key_file = ""

[tunnel_client]
# When enabled, prism runs a tunnel client loop that dials a remote tunnel
# server and registers one or more services.
enabled = false
server_addr = "127.0.0.1:7000"
transport = "tcp" # tcp | udp | quic
auth_token = ""
dial_timeout_ms = 5000

[tunnel_client.quic]
server_name = "localhost"
insecure_skip_verify = true

[[tunnel_client.services]]
name = "home-mc"
local_addr = "127.0.0.1:25565"

[logging]
level = "info"
format = "json"
output = "stderr"
add_source = false

[logging.admin_buffer]
enabled = true
size = 1000

[reload]
enabled = true
poll_interval_ms = 1000

[[routing_parsers]]
type = "builtin"
name = "minecraft_handshake"

[[routing_parsers]]
type = "builtin"
name = "tls_sni"

[timeouts]
handshake_timeout_ms = 3000
idle_timeout_ms = 0

[routes]
"play.example.com" = "127.0.0.1:25566"
"*.labs.example.com" = "127.0.0.1:25567"
"home.example.com" = "tunnel:home-mc"
